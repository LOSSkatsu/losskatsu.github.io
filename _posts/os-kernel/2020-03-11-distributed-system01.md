---
title: "분산 처리 시스템(distributed system)(1)" 
categories:
  - os-kernel
tags:
  - os
use_math: true
toc: true
toc_label: "My Table of Contents"
toc_icon: "cog"
sidebar:
  title: "AI Machine Learning"
  nav: sidebar-contents
---

# 분산 시스템(1)

본 포스팅은 MIT 6.284 Distributed Systems을 참고하여 작성 되었습니다.

## 분산 시스템의 정의

분산 시스템(distributed systems)의 핵심은 여러개의 컴퓨터가 동일한 테스크를 처리하기 위해 네트워크상에서 서로 통신하며 협력하는 것입니다. 
예를 들어, 거대한 웹사이트의 저장소라던가, 맵리듀스(MapReduce)와 같은 빅데이터 계산이라던가, peer-to-peer(P2P) 파일 공유 같은 것입니다. 
요즘같은 시대에는 인프라 구조(infra structure)가 하나의 일(job)을 하기 위해 여러개의 컴퓨터가 필요한 시대입니다. 
따라서 사람들은 이런 방법들을 연구하기 시작했어요. 
여러분이 만약 하나의 컴퓨터를 사용해서 어떤 문제를 풀수있다면 분산 시스템을 구축할 필요는 없습니다. 
실제로 하나의 컴퓨터로도 할수있는 일들이 정말 많죠. 
분산시스템은 쉽지 않습니다. 따라서 여러분들은 하나의 컴퓨터로 작업을 끝낼수있도록 연구하는게 나을수도있습니다. 

## 분산시스템을 구축하는 이유 

###  high-performance
사람들이 분산시스템을 구축하는 이유는 여러개의 컴퓨터가 협력함으로써 high-performance를 보여줄 수 있는데요. 
이를 위해서 parallelism이라는 게념이 필요합니다. 이는 많은 CPU, 많은 디스크, 메모리 등이 병렬로 연결된 것을 의미합니다. 

### fault tolerance
분산시스템을 구축하는 또 다른 이유는 단점을 견뎌낼수있기 때문입니다(tolerate faults). 
두개의 컴퓨터가 같은 일을 할때, 그 중 한대가 실패했을때, 다른 한대로 커버 가능합니다. 

### Physical reason
서버가 물리적으로 떨어져있을때도 사용합니다. 
예를들어, 은행 서버라고 했을 때, 한대는 뉴욕에 배치하고, 다른 하나는 런던에 배치할 수도 있죠.

### security
보안상의 문제가 있을 때 서로다른 권한, 프로토콜에 따라 다르게 배치할 수 있습니다. 
즉 고립된(isolated) 컴퓨터를 따로 구성할 수 있습니다. 

## 분산 시스템이 어려운 이유
굉장히 많은 파트가 있고, 그것들이 동시에 실행됩니다. 따라서 어떤 문제가 발생했을 때, 
컴퓨터간에 복잡하게 연결되어있는 부분이 있을 것이고, 시간에 의존적인(timing dependent stuff) 것도 있을 것입니다. 
분산 시스템이 어려운 또다른 이유는 분산시스템에는 굉장히 많은 파트와 네트워크가 있는데, 
여러분은 예상치못한 실패를 굉장히 많이 겪게 됩니다. 
하나의 컴퓨터로 할 때는 잘 실행되건 것이, 분산 시스템에서는 크래쉬가 발생하거나 알 수 없는 이유로 실패할 수 있습니다. 
여러분은 분산 시스템의 수많은 컴퓨터 중에 네트워크상 문제로 어떤 파트가 성공하고, 어떤 파트는 실패할 수 있습니다. 
이러한 부분적 실패(partial failure)가 분산 시스템이 어려운 또다른 이유 입니다. 
(challenges concurrency partial failure)
분산 시스템이 어려운 또다른 이유는 1000대의 컴퓨터를 사용한다고해서 1000배의 성능향샹이 따라오는 것은 아니기 때문입니다.(performance문제) 
분산시스템은 현실에서 많은 분야에 쓰입니다. 
예전에는 하나의 개인컴퓨터로도 웹사이트를 만드는고 운영하는데 문제없었지만, 웹사이트가 점점 커지고
엄청나게 많은 데이터를 저장하고 다루기 위해 연구한 끝에 분산시스템은 요즘 시대에 매우 중요한 인프라구조가 되었습니다. 
분산시스템에 관해서 많은 부분이 해결된 부분도 있지만 해결되지 않은, 연구가 필요한 부분도 아직 많습니다. 
만약 여러분이 분산시스템을 구축하고 싶다면 이 수업은 좋은 수업이 될 것입니다. 

## 이 포스팅 시리즈에서 다룰 것

### 분산시스템을 실현(implementation)하기 위해 필요한 것들

* Remote Procedure Call(RPC)
* 쓰레드(Threads) 
* Concurrency Control

### 성능(performance)

* 확장성(Scalability)

일반적으로 분산시스템의 높은목표(high-level goal)는 scalable spped-up 입니다. 
구체적으로 확장성이 뭐냐면, 어떤 문제를 풀기 위해 하나의 컴퓨터로 한 시간이 걸린다고 합시다. 
만약 제가 두번째 컴퓨터를 산다면 문제를 푸는 시간이 절반으로 줄어들어 30분만에 풀게 될거라고 기대하죠. 

2$\times$computers -> 2$\times$throughput

이 방법이 꽤 싸게먹히는 것이, 문제를 풀기 위해 단지 컴퓨터만 더 사면 된다는 것입니다. 
만약 컴퓨터를 더 사지 않고 문제를 해결하려면 더 능력있는 프로그래머를 고용하거나 해야죠. 

<center><img src="/assets/images/os/distributedsystem/01/distributedsystem01_01.jpg" width="800"></center>

한두명이 웹서버에 접근할 때는 하나의 컴퓨터로 충분합니다. 
하지만 몇백만명이 접속할때는 어떻게 해야할까요? 
단순히는 웹서버를 늘리고, 유저를 각각 다른 웹서버에 접속하게끔 아래그림처럼 쪼개면 됩니다. 

<center><img src="/assets/images/os/distributedsystem/01/distributedsystem01_02.jpg" width="800"></center>

물론 사용자는 같은 화면을 봐야하기 때문에 웹서버는 같은 DB를 바라봐야합니다. 
하지만 위와 같은 시스템에서 웹서버를 무한정 늘리다가는 웹서버가 데이터베이스의 데이터를 읽는 과정에서 병목이 생깁니다. 
따라서 DB도 함께 늘려줘야하죠. 

## 
