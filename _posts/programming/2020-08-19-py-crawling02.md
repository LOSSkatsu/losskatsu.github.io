---
title: "[python] 파이썬 웹 크롤링(2)" 
categories:
  - programming
tags:
  - programming
use_math: true
toc: true
toc_label: "My Table of Contents"
toc_icon: "cog"
sidebar:
  title: "AI Machine Learning"
  nav: sidebar-contents
---

# 파이썬 웹 크롤링(2): HTML 파싱

**참고 링크**

* [파이썬 웹 크롤링(1)](https://losskatsu.github.io/programming/py-crawling01/)
* [파이썬 웹 크롤링(2)](https://losskatsu.github.io/programming/py-crawling02/)

# Chapter2: HTML 파싱

## 2.1 BeautifulSoup의 또다른 기능

Chapter 1에서는 BeautifulSoup을 설치하고 HTML 내용을 읽어들이는 방법을 알아보았습니다. 
이번 챕터에서는 속성(attribute)를 기반을 태그(tag)를 찾아보고 
트리 형식으로 되어있는 태그를 탐험해보겠습니다. 

여러분은 거의 모든 웹사이트에서 스타일시트(stylesheet)를 보게될 것입니다. 
브라우저의 종류에 따라 디자인된 웹사이트의 스타일 레이어가 별로 안좋다고 생각할 지라도, 
CSS의 출현은 크롤링에는 좋은 현상이었습니다. 
CSS는 그들이 표현하고자하는게 다를지라도 같은 마크업을 사용하는 HTML 요소의 차별성에 의존합니다. 
예를 들어 아래와 같은 태그가 존재할 때

```html
<span class="green"></span>
```
다른 것은 아래와 같습니다.

```html
<span class="red"></span>
```

웹 크롤러는 클래스(class)에 기반한 서로다른 두 태그를 쉽게 구분할 수 있습니다. 
예를 들어, BautifulSoup을 사용해서 모든 빨간 텍스트(red text)를 잡아내고 초록색 텍스트(green text)는 걸러낼 수 있습니다. 
왜냐하면 CSS는 웹사이트의 속성(attribute) 식별에 의존하고, 클래스와 ID 속성은 거의 모든 웹사이트에 존재합니다. 

아래와 같은 웹사이트를 크롤링한다고 해봅시다.

[http://www.pythonscraping.com/pages/warandpeace.html](http://www.pythonscraping.com/pages/warandpeace.html)

위 사이트에서 주인공의 대사는 빨강색으로 처리되어있는 반면 캐릭터 이름은 초록색으로 처리되어 있습니다. 
여러분은 CSS 클래스 내부의 span 태그를 이용해 볼 수 있습니다. 
다음은 페이지 소스의 일부입니다. 
(여러분이 직접 보고 싶다면 위 사이트를 접속해서 F12를 눌러서 확인할 수도 있습니다.)

```css
"<span class="red">Heavens! what a virulent attack!</span>" replied <span class=
"green">the prince</span>, not in the least disconcerted by this reception.
```

일단 차근차근 진행해보겠습니다. 
[챕터 1](https://losskatsu.github.io/programming/py-crawling01/)에서 했던 것 처럼 BeautifulSoup을 이용해 페이지 전체를 긁어와 보겠습니다. 

```python
from urllib.request import urlopen
from bs4 import BeautifulSoup
html = urlopen("http://www.pythonscraping.com/pages/warandpeace.html")
bsObj = BeautifulSoup(html)
```
BeautifulSoup을 이용해 만든 bsObj 오브젝트 파일을 이용해 findAll 함수를 이용해 적절한 명사 리스트를 추출할 수 있습니다. 

```python
nameList = bsObj.findAll("span", {"class":"green"})
for name in nameList:
  print(name.get_text())
```
